@startuml
participant User
participant GameBoardComponent
participant GameController
participant GameBoard
participant ColorCounter
participant AnimationService
participant ColorCounterComponent

User -> GameBoardComponent : onPanelClick(panelId)
GameBoardComponent -> GameController : applyColorChange(panelId)
activate GameController
GameController -> GameBoard : getPanelsToChangeColor(panelId)
GameBoard --> GameController : return panelsToChangeColor
GameController --> GameBoardComponent : initiatePanelColorChange(panelsToChangeColor)
deactivate GameController
loop Until panelsToChangeColor is empty
    GameBoardComponent -> AnimationService : startAnimation(panel)
    AnimationService --> GameBoardComponent : emit('animationStart')
    activate GameController
    GameBoardComponent -> GameController : updateColorCounterAndGameBoard(panel)
    GameController -> GameBoard : changePanelColor(panel)
    GameBoard --> GameController
    GameController -> GameBoardComponent : updateGameBoardDisplay(panels)
    GameBoardComponent --> GameController
    GameController -> ColorCounter : updateColorCounter()
    ColorCounter --> GameController
    GameController -> ColorCounterComponent : updateColorCounterDisplay(newColorCounterValues)
    ColorCounterComponent --> GameController
    GameController --> GameBoardComponent
    deactivate GameController
    GameBoardComponent --> GameBoardComponent : removePanelFromChangeColorList(panel)
end
@enduml